#!/usr/bin/env node
'use strict';

var _meow = require('meow');

var _meow2 = _interopRequireDefault(_meow);

var _chalk = require('chalk');

var _chalk2 = _interopRequireDefault(_chalk);

var _express = require('express');

var _express2 = _interopRequireDefault(_express);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var cli = (0, _meow2.default)('\nUsage: ' + _chalk2.default.yellow('docute [dir] [options]') + '\n\nCommands:\n  ' + _chalk2.default.yellow('*, preview') + '             Preview docs\n  ' + _chalk2.default.yellow('init') + '                   Initialize a folder for docs\n\nOptions:\n  ' + _chalk2.default.yellow('--watch, -w') + '            Enable live reloading\n  ' + _chalk2.default.yellow('--port, -p') + '             Server port\n  ' + _chalk2.default.yellow('--version, -v') + '          Print version\n  ' + _chalk2.default.yellow('--help, -h') + '             Print help\n\nExamples:\n  docute                    ' + _chalk2.default.dim('# Preview ./docs folder') + '\n  docute ./website          ' + _chalk2.default.dim('# preview ./website folder') + '\n  docute --port 3000        ' + _chalk2.default.dim('# running server at port 3000') + '\n', {
  alias: {
    w: 'watch',
    p: 'port',
    h: 'help',
    v: 'version'
  }
});
var dir = cli.input[0] || './docs';

var app = (0, _express2.default)();

if (cli.flags.watch) {
  app.use(require('connect-livereload')());
  require('../lib/livereload').default({ files: [dir + '/**'] });
}
app.use('/', _express2.default.static(dir));

var port = cli.flags.port || 8080;
app.listen(port, '0.0.0.0');
console.log();
console.log(_chalk2.default.dim('  > hello docute user!'));
console.log('  > open ' + _chalk2.default.yellow('http://localhost:' + port) + ' to preview');
if (cli.flags.watch) {
  console.log('  > watching');
}
console.log();